<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>police.ai | Call Intake</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="bg-orbit"></div>
    <div class="grid-noise"></div>

    <header class="topbar">
      <div class="brand">
        <div class="brand-mark">911</div>
        <div>
          <p class="brand-title">police.ai</p>
          <p class="brand-subtitle">AI intake + operator capture</p>
        </div>
      </div>
      <div class="top-actions">
        <a class="ghost" href="index.html">Landing</a>
        <a class="ghost" href="dashboard.html">Dashboard</a>
        <button class="ghost theme-toggle" id="themeToggle">Light Mode</button>
        <div class="status-pill">
          <span class="pulse"></span>
          <span>Listening Ready</span>
        </div>
      </div>
    </header>

    <main class="layout">
      <section class="hero call-intake">
        <div class="hero-panel">
          <div class="panel-header">
            <div>
              <h2>Active Call Intake</h2>
              <p id="callState">Idle</p>
            </div>
            <div class="panel-actions">
              <button class="primary" id="startCall">Start AI Call</button>
              <button class="ghost" id="stopCall" disabled>End Call</button>
              <div class="timer" id="callTimer">00:00</div>
            </div>
          </div>
          <div class="panel-body">
            <div class="call-grid">
              <div>
                <label>Caller name</label>
                <input id="callerName" placeholder="Unknown" />
              </div>
              <div>
                <label>Caller phone</label>
                <input id="callerPhone" placeholder="Optional" />
              </div>
              <div>
                <label>Location description</label>
                <input id="locationText" placeholder="Street, landmark, floor" />
              </div>
              <div>
                <label>Priority</label>
                <select id="priority">
                  <option value="critical">Critical</option>
                  <option value="high" selected>High</option>
                  <option value="medium">Medium</option>
                  <option value="low">Low</option>
                  <option value="info">Information-only</option>
                </select>
              </div>
            </div>
            <div class="intake-grid">
              <div>
                <label>Emergency type</label>
                <select id="emergencyType">
                  <option value="medical">Medical</option>
                  <option value="fire">Fire</option>
                  <option value="police">Police</option>
                  <option value="other" selected>Other</option>
                </select>
              </div>
              <div>
                <label>People involved</label>
                <select id="peopleCount">
                  <option value="1">1</option>
                  <option value="2-3">2-3</option>
                  <option value="4+">4+</option>
                  <option value="unknown" selected>Unknown</option>
                </select>
              </div>
              <div>
                <label>Injuries</label>
                <select id="injuries">
                  <option value="none">None</option>
                  <option value="minor">Minor</option>
                  <option value="serious">Serious</option>
                  <option value="unknown" selected>Unknown</option>
                </select>
              </div>
              <div>
                <label>Ongoing danger</label>
                <select id="danger">
                  <option value="active">Active</option>
                  <option value="contained">Contained</option>
                  <option value="unknown" selected>Unknown</option>
                </select>
              </div>
              <div>
                <label>Caller relationship</label>
                <select id="relationship">
                  <option value="victim">Victim</option>
                  <option value="bystander">Bystander</option>
                  <option value="relative">Relative</option>
                  <option value="unknown" selected>Unknown</option>
                </select>
              </div>
              <div>
                <label>Special circumstances</label>
                <input id="specialCircumstances" placeholder="Weapons, hazmat, children, elderly" />
              </div>
              <div>
                <label>Building details</label>
                <input id="buildingDetails" placeholder="Gate code, floor, apartment" />
              </div>
              <div>
                <label>Accessibility</label>
                <input id="accessibility" placeholder="Locked gate, elevator out" />
              </div>
            </div>
            <div class="call-quality">
              <div>
                <label>Detected language</label>
                <select id="language">
                  <option value="en" selected>English</option>
                  <option value="es">Spanish</option>
                  <option value="fr">French</option>
                  <option value="de">German</option>
                </select>
              </div>
              <div class="quality-meter">
                <span>Panic score</span>
                <strong id="panicScore">0.0</strong>
              </div>
              <div class="quality-meter">
                <span>Noise level</span>
                <strong id="noiseLevel">Low</strong>
              </div>
              <div class="toggle-row">
                <label class="toggle">
                  <input type="checkbox" id="callRecording" />
                  <span>Call recording</span>
                </label>
                <label class="toggle">
                  <input type="checkbox" id="callDropped" />
                  <span>Call dropped</span>
                </label>
                <label class="toggle">
                  <input type="checkbox" id="callbackRequested" />
                  <span>Callback needed</span>
                </label>
              </div>
            </div>
            <div class="speech-area">
              <div class="speech-header">
                <h3>Live Transcript</h3>
                <div class="chips" id="aiFlags"></div>
              </div>
              <textarea id="transcript" rows="6" placeholder="Live voice transcription will appear here..."></textarea>
              <div class="speech-actions">
                <button class="ghost" id="toggleListen">Voice Intake</button>
                <button class="ghost" id="geoLocate">Pinpoint Location</button>
                <button class="ghost" id="playback">AI Voice</button>
              </div>
            </div>
            <div class="notes-area">
              <div class="notes-header">
                <h3>Operator Notes</h3>
                <span class="mini">Auto-summarized if needed</span>
              </div>
              <textarea id="notes" rows="5" placeholder="Essential notes, hazards, caller condition, units requested..."></textarea>
            </div>
            <div class="notes-area">
              <div class="notes-header">
                <h3>AI Summary</h3>
                <span class="mini">Gemini triage output</span>
              </div>
              <textarea id="aiSummary" rows="4" placeholder="AI summary will appear here..." readonly></textarea>
              <div class="speech-actions">
                <button class="ghost" id="runTriage">Run AI Triage</button>
              </div>
            </div>
            <div class="notes-area">
              <div class="notes-header">
                <h3>AI Questions</h3>
                <span class="mini">Logged for human handoff</span>
              </div>
              <textarea id="aiQuestions" rows="4" placeholder="Questions will appear here..." readonly></textarea>
            </div>
            <div class="notes-area">
              <div class="notes-header">
                <h3>Caller Answers</h3>
                <span class="mini">Record answers for the dispatcher</span>
              </div>
              <textarea id="aiAnswers" rows="4" placeholder="Caller answers, one per line..."></textarea>
            </div>
            <div class="panel-footer">
              <button class="primary" id="createIncident">Log & Dispatch</button>
              <button class="ghost" id="clearIncident">Clear</button>
            </div>
          </div>
        </div>
      </section>

      <section class="call-list">
        <div class="call-list-header">
          <div>
            <h2>Past Calls</h2>
            <p>Priority, dispatch status, and escalation tracking.</p>
          </div>
          <button class="ghost" id="refreshQueue">Refresh</button>
        </div>
        <div class="call-list-body" id="callList"></div>
      </section>

      <section class="records">
        <div class="records-header">
          <div>
            <h2>Audit Trail</h2>
            <p>Immutable call events and dispatcher actions.</p>
          </div>
          <button class="ghost" id="refreshAudit">Refresh</button>
        </div>
        <div class="audit-list" id="auditList"></div>
      </section>

    </main>

    <footer class="footer">
      <p>Demo system only. Always connect to live emergency services in production.</p>
    </footer>

    <script src="app-call.js"></script>
  </body>
</html>
